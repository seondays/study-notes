[Transaction in DBMS - GeeksforGeeks](https://www.geeksforgeeks.org/transaction-in-dbms/)를 참고하여 학습한 문서입니다.
## 데이터베이스 트랜잭션이란?
>논리적으로 관련된 일련의 작업들이 하나의 단위로 실행되는 것을 의미하는 개념
>데이터베이스가 일관적이고 안정적으로 유지되도록 보장한다.

## Properties of Transaction : ACID
트랜잭션이 안정적으로 처리되고, DB의 안정성을 유지하기 위해 트랜잭션이 준수해야 하는 속성 4가지를 의미함
### Atomicity (원자성)
- 트랜잭션의 작업이 모두 실행되거나, 혹은 모두 실행되지 않아야 한다.
- 어떤 경우든 트랜잭션은 부분적으로 완료될 수 없음
- 각 트랜잭션을 원자처럼 하나의 단위로 취급한다. → 커밋 & 롤백 작업으로 가능
### Consistency (일관성)
- 트랜잭션 완료 전, 후의 DB 상태는 일관적으로 유지되어야 한다.
	- 일관적으로 상태가 유지된다는 것은 DB의 변경이 모호성이 없고, 사용자가 수행한 논리적 연산에 의한 결과여야 하며 제약 조건을 준수한다는 것
	- 트랜잭션 작업 도중에는 잠시 일관성이 깨질 수도 있지만, 커밋 후 종료 후에는 일관적인 상태여야 한다.
### Isolation (격리성)
- 서로 다른 트랜잭션들은 서로 간섭해서는 안되며, 독립적인 실행 환경을 보장받아야 한다.
- 예를 들자면 1번 트랜잭션이 a 데이터를 사용하고 있는 경우, 2번 트랜잭션은 a 데이터를 사용하기 위해 기다려야 하는 것 (이는 격리성 수준마다 상이)
- 격리성은 DBMS의 동시성 컨트롤 시스템에 의해서 시행된다.
### Durability (지속성)
- 트랜잭션이 정상적으로 완료된 후 변경된 DB의 내용은 영구적으로 저장됨을 보장해야 한다.
## Transaction Schedules
여러 트랜잭션이 동시에 요청되는 경우, 이 트랜잭션들간의 실행 순서를 결정해야 한다.
### Serial Schedule
- 트랜잭션들을 한번에 하나씩 순차적으로 실행함으로서 DB의 일관성을 보장한다.
- 따라서 실행 중이 아닌 다른 트랜잭션들은 현재 트랜잭션의 실행이 끝나기 전까지 기다려야 함
- 트랜잭션들이 대기하는 시간이 있기 때문에, 실행 속도가 느려지게 된다.
### Non-Serial Schedule
- 비직렬 방식은 여러 트랜잭션이 병렬로 실행되는 방식을 의미한다.
- 기다림 없이 함께 실행되기 때문에 동시성과 성능이 개선되지만, 트랜잭션의 이런 동시적 실행은 데이터베이스의 일관성이 깨질 가능성이 있다. → 이를 위한 것이 `Serializable` 개념
### Serializable
비직렬 스케줄 방식에서 DB의 일관성을 유지할 수 있을지를 결정하는 속성. 비직렬 스케줄 방식으로 실행하더라도 직렬 스케줄 방식의 실행 결과처럼 DB의 일관성을 유지한다면 이를 `Serializable Schedule`이라 한다.

## 트랜잭션 단계
트랜잭션은 다음과 같은 여러 단계를 거친다.
![Transaction-in-dbms](https://github.com/user-attachments/assets/2c87f163-d409-46d1-b554-a6f1a5bc2844)
### Active
- 트랜잭션의 첫 번째 단계로, 트랜잭션 실행이 시작된다.
- 삽입 삭제 업데이트와 같은 작업이 이 단계에서 실행된다.
- 데이터 변경 작업은 아직 DB에 반영되지 않으며 메모리 버퍼에 남아 있는 상태이다.
### Partially Committed
- 부분 커밋 상태는 트랜잭션 작업 대부분이 완료되었으며, 최종 작업을 실행중일 때 달성되는 단계
- 최종 작업 완료 후 커밋 상태가 되기 직전의 상태이다.
- 이 상태에서 만일 오류가 발생한다면 트랜잭션은 실패한다.
### Commited
- 모든 트랜잭션 관련 작업이 성공적으로 실행되었을 때 달성되는 단계
- 데이터 작업이 DB에 저장되고, 트랜잭션이 성공적으로 완료되었음을 의미한다.
### Failed
- `Active`, `Partially Committed` 상태에서 작업 중 오류가 발생하면 트랜잭션의 실행이 중지되고 `Failed`로 전환
- DB의 복구 시스템은 여기서 DB가 일관된 상태를 유지하고 있는지를 확인한다.
### Aborted
- 실패 상태에서 오류를 해결하지 못하고 일관성이 깨진 상태라면 트랜잭션은 `Aborted` 상태가 된다.
- 롤백 작업이 수행되어 DB의 내용을 되돌린다.