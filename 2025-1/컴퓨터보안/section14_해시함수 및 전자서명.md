# Section14. 해시함수 및 전자서명
## ✔︎ 해시함수
임의의 길이의 입력 데이터를 고정된 길이의 해시코드로 대응시키는 함수
- 다양한 길이의 입력 데이터가 들어오더라도, 결과는 고정된 길이가 나와야 함
- 일방향 함수의 특성을 가짐
	- 해시코드는 쉽게 만들어지지만, 반대로 해시코드로 원 데이터를 찾는 것은 어려움
- 또 추가적으로 안전한 해시함수를 위한 요구조건들이 존재한다
	- 약한 일방향성
	- 강한 일방향성
	- 충돌저항성

#### 약한 일방향성
**해시 함수와 해시코드**가 주어졌을 때, 여기에서 기존 입력 데이터를 구하는 것은 계산상으로 실행 불가능해야 한다.

#### 강한 일방향성
**해시 함수 H와 입력 데이터 D**가 주어졌을 때, 여기에서 둘을 통해 생성한 해시코드로, 다른 입력 데이터를 구하는 것은 계산상으로 실행 불가능해야 한다.

즉, H(D) = H(D’)을 만족하는 다른 입력 데이터인 D’를 구할 수 없다.

#### 충돌저항성
해시함수 H가 주어졌을 때 동일한 해시 코드를 생성해내는 입력값 D와 D’를 구하는 것은 계산상으로 실행 불가능해야 한다.

즉, H(D) = H(D’)을 만족하는 두 입력 데이터 D와 D’를 구할 수 없다.

## ✔︎ 해시 알고리즘
### 전용 해시 알고리즘
#### MD4
- 많은 전용 해시 알고리즘의 기본 모델이 된 알고리즘
- 해시코드 크기 128비트

#### MD5
- MD4보다 보수적으로 설계된 알고리즘
- 안전하지만 상대적으로 속도가 느림
- 해시코드 크기 128비트

MD4, 5는 일방향성과 충돌저항성에 문제가 있어 지금은 사용하지 말 것을 권고하고 있다.

#### SHA-1
- 1995년 발표된 표준 해시 알고리즘
- 입력 데이터가 2^64 비트보다 작은 크기의 입력 데이터에만 적용 가능하다는 제약
- 해시코드 크기 160비트
- SHA-1 역시 취약성이 드러나고 있어 그 다음 알고리즘들이 표준에 추가되었다

#### SHA-2
- 2002년에 표준 해시 알고리즘에 추가됨
- 1과 유사한 구조에 기반을 두고 있는 알고리즘
- 해시코드 크기에 따라 다양화되어 있다.
	- SHA-224, SHA-246, SHA-384, SHA-512
- 384와 512는 2^128 비트보다 작은 크기의 입력 데이터에 적용 가능하도록 기존보다 범위가 넓어졌다.

#### SHA-3
- 2015년에 표준 해시 알고리즘에 추가됨
- 1과 2와 달리 완전하게 새로운 구조로 만들어졌다
	- 스펀지 구조
- 입력 데이터의 크기 제한 없음

##  ✔︎ 전자서명
메시지를 보낸 사람의 신원이 진짜임을 증명하며, 동시에 전달된 메시지의 원래 내용이 변조되지 않았다는 것을 보증한다.
- 예를 들어 인증서 발급 기관의 전자 서명이 포함되어 있기 때문에, 그 인증서가 진짜임을 확인 가능한 것
- 메시지의 암호화 여부에는 상관없이 사용된다.

### 전자서명 요구조건
- 전자서명은 서명되는 메시지에 의존하는 비트값
- 전자서명은 서명자만의 고유정보를 사용해야 함
- 전자서명의 생성과 검증이 쉬워야 함
- 전자서명의 위조는 계산적으로 불가능해야 함

→ 이러한 요구조건을 지키기 위해 해시함수와 공개키 암호를 사용하자

### 전자서명 동작원리
전자서명은 서명하는 단계와 검증하는 단계가 있다.

#### 서명
- 메시지에 의존하는 작은 크기의 데이터를 생성하기 위해 해시함수를 사용한다.
- 오직 서명자 본인만 알고 있는 고유정보인 개인키를 이용하여 서명을 만든다.

1. 서명자는 송신하고자 하는 메시지 M에 해시함수를 적용하여 해시코드 h를 생성한다.
2. 생성된 해시코드 h를 서명자의 개인키로 암호화하여 최종적으로 M에 대한 서명자의 전자서명인 s를 얻는다.
3. 메시지 M과 전자서명 s를 붙여서 송신한다.

#### 검증
- 검증은 누구나 할 수 있어야 하기 때문에, 서명자의 공개키를 이용해서 검증한다.

1. 수신자는 받은 메시지에서 전자서명을 제외한 메시지 M에 해시함수를 적용하여 해시코드 h를 생성한다.
2. 전자서명 s를 서명자의 공개키로 복호화하여 h’ 값을 얻는다.
3. h 값과 h’ 값이 동일한지 비교하여 서명이 유효한지를 판단한다.

### 전자서명 기법의 종류
#### ElGamal 전자서명 기법 & Schnorr 전자서명 기법
이산대수 문제에 기반한 공개키 암호 이용

#### 전자서명표준 (DSS)
세 가지 기법으로 구성된다.
- DSA
- RSA
- ECDSA